"use strict";!function(a){var b=apower.tr;a.registerOnce(".main",function(){window.innerWidth<=768&&"100%"===this.el.css("minHeight")&&(this.el[0].style.height=this.el[0].offsetHeight+"px",this.el[0].style.minHeight="auto")}),a.registerOnce(".free-vip",{init:function(){this.el.$on("click",this.onClickEl,this),this.win=a(".vip-win")},onClickEl:function(){this.win.com().show()}}),a.registerOnce(".subheader",{ref:{logo:".logo"},init:function(){this.logo.$on("click",this.onClickLogo,this)},onClickLogo:function(){a("html, body").animate({scrollTop:0},500)}}),a.registerOnce(".mouse-scroll-down > div",function(){this.el.$on("click",function(){var b=a(".main").next();a("html, body").animate({scrollTop:b.offset().top},500,"swing")})}),a.registerOnce(".sub-start-recording, .sub-select-files, .sub-screenshot-launch",function(){this.el.$on("click",function(){if(a("html, body").animate({scrollTop:0},300),37==apower.productId&&window.audioRecorder){if(audioRecorder.isRecording)return void audioRecorder.endRecording();if(audioRecorder.opened)return}a(".main .start-recording, .main .start-video-converter, .main .screenshot-launch").click()})}),a.registerDir("learn-more",{selector:".learn-more > div",init:function(){this.el.$on("click",function(b){var c=a(b.target).closest(".learn-more"),d=c.closest(".function"),e=d.find(".pack-up"),f=d.find(".writing"),g=d.find(".more-content"),h=d.find("h2 + p");a(window).width()<768&&c.before(d.find(".more > *")),c.hide(),e.show(),g.slideDown(300),h.dir("multiline-overflow")&&h.dir("multiline-overflow").cancel();var i=h.height();h.addClass("show-more"),f.addClass("remove-padding");var j=h.height();h.height(i),h.animate({height:j},300,function(){h.height(""),apower.offset.update()});var k=d.offset().top,l=a("html").scrollTop()||a("body").scrollTop();k>l&&a("html, body").animate({scrollTop:k},300,"swing")})}}),a.registerDir("pack-up",{selector:".pack-up > div",init:function(){if("block"==this.el.closest(".pack-up").css("display")){var b=this.el.closest(".function").find(".writing p");b.addClass("show-more")}this.el.$on("click",function(b){var c=a(b.target).closest(".pack-up"),d=c.closest(".function"),e=d.find(".more-content"),f=d.find(".writing"),g=d.find("h2 + p"),h=d.find(".learn-more"),i=a("html").scrollTop()||a("body").scrollTop(),j=g.height();g.removeClass("show-more"),f.removeClass("remove-padding");var k=g.height();if(e.length&&e.offset().top<i){var l=e.height()+j-k,m=i-l-50;a("html, body").animate({scrollTop:m},300)}h.show(),c.hide(),e.slideUp(300),g.height(j),g.animate({height:k},300,function(){g.height(""),apower.offset.update(),g.dir("multiline-overflow")&&g.dir("multiline-overflow").updateEllipsis()})})}}),a.registerOnce(".writing p",function(){this.el.each(function(b,c){a.newCom("multiline-overflow",c)})}),a.registerOnce(".faq a",function(){this.el.each(function(b,c){c.title=a(c).text()})}),a.registerOnce(".comments h2",{init:function(){this.adjust(),a(window).$on("load",this.adjust,this)},adjust:function(){if(this.el.length>0){var b=a(window).width(),c=this.el[0].offsetHeight;if(b>1200/.9&&c>60){this.el.css("white-space","nowrap");var d=this.el[0].scrollWidth,e=parseInt(this.el.css("font-size")||60),f=1200*e/d;this.el.css("font-size",f)}}}}),a(document).ready(function(){if(17==apower.productId){var c=a(".feature li");c.each(function(b,c){c=a(c),a.newCom("font-fit",c)})}if(38==apower.productId){var d=a(".tasks div"),e=function(){var b=new Date,c=60,e=60*c,f=b.getSeconds(),g=b.getMinutes()*c+f,h=b.getHours()*e+g,i=360*(f/c),j=360*(g/e),k=360*(h/(12*e));a("#second-hand").attr("transform","rotate("+i+", 16, 16)"),a("#minute-hand").attr("transform","rotate("+j+", 16, 16)"),a("#hour-hand").attr("transform","rotate("+k+", 16, 16)"),d.each(function(b,c){Math.random()>.75?a(c).addClass("light-on"):a(c).removeClass("light-on")})};setInterval(e,1e3)}if(37==apower.productId&&window.audioRecorder&&(audioRecorder.onstart=function(){a(".start-audio-recording span").text(b("stop_recording")),a(".start-audio-recording").addClass("stop-recording")},audioRecorder.onend=audioRecorder.onclose=function(){a(".start-audio-recording span").text(b("start_recording")),a(".start-audio-recording").removeClass("stop-recording")}),"index"===apower.pageType){if(a(window).width()<768&&a.env.isIphone&&(a(".ios-content").addClass("active"),a(".android-content").removeClass("active")),a(".screen-item").on("click",function(b){if(!a(b.target).closest("a").length){var c=a(b.target).closest(".screen-item").find(".learn-more a")[0];c&&c.click()}}),a(".classify-content, .mobile-content").$on("tabactive",function(b){b.find(".obj-wrap").each(function(b,c){a(c).dir("fit").reFit()}),apower.offset.update()}),a(window).width()<=768){if(a(".screen.slider").css("min-height",a(window).height()+18),0==a(".classify").length)return;a(".classify").addClass("slider"),a(".classify-list").addClass("slider-tab"),a(".classify > div").append('<ul class="slider-btn"></ul>'),a(".classify-list").children(":first-child").addClass("active"),a(".classify-body").children(":first-child").addClass("active"),a.newCom("slider",".classify"),a(".classify-list li").$on("tabactive",function(a){a.click()});var f=function(){var b=768,c=473,d=Math.min(a(window).width(),b);a(".classify-list").width(d).height(c/b*d+100)};a(window).on("resize",f),f()}a(".classify-list").on("click",function(b){var c=a(".classify-list").offset().top;a("html, body").animate({scrollTop:c})}),a(".ios-content .phone h2+p").text(a(".android-content .phone h2+p").text())}if(92==apower.productId){var g=a(".video-obj"),h=g.find(".video-enlarge");g.on("mouseenter",function(a){h.stop(!0).css({left:21,top:56}).animate({left:22,top:57},{duration:600,easing:"linear",step:function(a,b){var c=b.now-b.start,d=Math.PI*c;"left"===b.prop?b.now=b.start+24*Math.sin(d):b.now=b.start-24*(1-Math.cos(d))}})}),g.on("mouseleave",function(a){h.stop(!0).animate({left:21,top:56},{duration:600,easing:"linear"})});var i=a(".shareimg").find("[data-tap]"),j=a(".shareimg").find(".bubble");i.on(a.env.hasMouse?"mouseenter":"click",function(b){var c=a(b.target).closest("div"),d=c.data("tap");c.siblings("[data-tap]").stop(!0),c.animate({transform:"rotate(15deg)"},50).stopableDelay(50).animate({transform:"rotate(-15deg)"},50).stopableDelay(50).animate({transform:"rotate(15deg)"},50).stopableDelay(50).animate({transform:"rotate(-15deg)"},50).stopableDelay(50).animate({transform:"none"},50),j.removeClass("active"),a("."+d).addClass("active")}),a(".shareimg").find(".obj-wrap").$on("outview",function(){j.removeClass("active")});var k,l=a(".faster"),m=l.find(".process span"),n=l.find(".obj-wrap");n.$on("outview",function(){m.text(100)}),n.$on("inview",function(){var b=a(".faster").find(".process span");if(!k){var c=function(){var a=100;setInterval(function(){a--,0>a?k=0:b.text(a)},1)};k=setTimeout(c,3e3)}})}if(112==apower.productId){var o=a(".recover-files-ins").find(".tab-head li"),p=a(".recover-files-ins").find(".tab-content .content-item");o.$on("click touchstart",function(b){for(var c=o.index(b.currentTarget),d=0,e=o.length;e>d;d++)o.eq(d).removeClass("active"),p.eq(d).css("display","none");a(b.currentTarget).addClass("active"),p.eq(c).css("display","block")})}}),a(document).ready(function(){a(".download, .download-desktop").on("click",function(b){var c=a(b.target).closest(".download, .download-desktop"),d=c.attr("data-zone"),e=c.attr("data-cid"),f=apower.productId;d&&f&&e&&a.post("https://support.apowersoft.com/ad-statistics/?action=callback&zone="+d+"&pid="+f+"&cid="+e)})}),78==apower.productId&&(a.register("photoslider","slider",{selector:".photoslider",ref:{btnWrap:".photoslider-btn",tabWrap:".photoslider-tab",btns:".photoslider-btn li",tabs:".photoslider-tab li",prevEl:".photoslider-prev",nextEl:".photoslider-next",leftEl:".photoslider-img-left",rightEl:".photoslider-img-right"},init:function(){this.initBtnList(),this.initActive(),this.initPosition(),this.btns.$on("click",this.onClickBtn,this),this.tabs.$on("click",this.onClickTab,this),this.tabWrap.onPan(this.onPan.bind(this))},initPosition:function(){for(var a=this.tabWrap.width(),b=this.tabs[0].offsetWidth,c=(a-b)/(this.tabs.length-1),d=0;d<this.tabs.length;d++)this.tabs.eq(d).css("left",c*d)},onClickTab:function(b){var c=a(b.target).closest("li").index();this.btns.eq(c).click()},fitTabHeight:function(){}}),window.onapowervideodata=function(b){if(b&&b[0]){b=b[0];var c=document.documentElement.lang,d=b.webpage_url.match(/^https?:\/\/([^\/]+)/),e=d?d[1]:"";if(e&&"el"!==c){var f=["www.youtube.com","youtube.com","youtu.com","youtu.me"].indexOf(e)>-1;if(f){var g={};g.title=b.title,g.video_url=b.webpage_url,g.image_url=b.thumbnail,g.duration=b.duration,g.category=b.categories,g.tags=b.tags,g.content=b.description,g.uploader=b.uploader,g.uploader_id=b.uploader_id,g.view_count=b.view_count,a(".apower-video-title").html(g.title)}}}}),a.registerOnce(".error-page",{init:function(){this.ct=a(".coupon-nav"),this.btn1=a(".coupon-code"),this.btn2=a(".shop-now"),this.width1=this.btn1[0].offsetWidth,this.width2=this.btn2[0].offsetWidth,this.reLayoutBtns(),a(window).$on("resize",this.reLayoutBtns,this)},clearClasses:function(){this.ct.removeClass("line-two-btns").removeClass("line-one-btn")},reLayoutBtns:function(){this.clearClasses();var a=this.ct[0].clientWidth;a>this.width1+this.width2+43+120?this.btn1.after(this.btn2):a>this.width1+this.width2+43?(this.ct.addClass("line-two-btns"),this.btn1.after(this.btn2)):(this.ct.addClass("line-one-btn"),this.btn1.before(this.btn2))}}),(53==apower.productId||3==apower.productId&&2==apower.productType)&&(a.registerOnce(".usbtable",{init:function(){this.typediv=this.el.find(".type div").clone(!0),this.wifiul=this.el.find(".wifi ul"),this.cablesul=this.el.find(".cables ul").clone(!0).addClass("alignright"),this.cablesway=this.el.find(".cables .way").clone(!0),this.wifiway=this.el.find(".wifi .way"),a.onToggleMobile(this.reLayoutTable,this.recoverTable,this)},reLayoutTable:function(){this.wifiway.after(this.cablesway);for(var a=0;a<this.wifiul.length;a++)this.wifiul.eq(a).before(this.typediv.eq(a)),this.wifiul.eq(a).after(this.cablesul.eq(a))},recoverTable:function(){this.typediv.remove(),this.cablesul.remove(),this.cablesway.remove()}}),a.registerOnce(".transfer .obj-wrap",function(){var a,b,c,d=this.el.find(".process span"),e=function(){c=0,b=setInterval(function(){c++,c>100?a=0:d.text(c)},40)},f=function(){a=0,clearTimeout(a),clearInterval(b),d.text(0)},g=function(){a||(a=setTimeout(e,2500))};this.el.$on("inview",g),this.el.$on("outview",f)}),a.registerOnce(".buttons ",{init:function(){this.mbdownload=this.el.find(".mb-download"),this.deskdownload=this.el.find(".desk-download"),a(window).width()>768&&this.mbdownload.$on("click",this.onClickMb,this)},onClickMb:function(b){b.preventDefault(),a(".download-win").com().show()}})),49==apower.productId&&(a.env.isMobile||a(window).width()<768)&&a.registerOnce(".manage .obj-wrap >div",function(){this.el.click(function(b){var c=a(b.target).closest(".transfer-obj");c.hasClass("active")?c.removeClass("active"):(a(".manage .obj-wrap >div").removeClass("active"),c.addClass("active"))}),a(document).on("touchstart",function(b){a(b.target).closest(".manage .obj-wrap").length||a(".manage .obj-wrap >div").removeClass("active")})}),78==apower.productId&&(a.registerOnce(".share",{init:function(){this.el.find("li").$on("click",this.onClick,this);var b=this.el.dir("bind-share");b.onopenparams=function(b){var c=this.el.offset(),d=(window.screenX||0,(window.screenY||0)+(window.outerHeight-window.innerHeight||0),Math.max(a(document.documentElement).scrollTop(),document.body.scrollTop)),e=Math.round(c.left)-10,f=Math.round(c.top-d)-10;return b+",left={0},top={1}".format(e,f)}.bind(this)},onClick:function(b){setTimeout(function(){var c=a(b.target).closest(".step-one"),d=c.find(".bg-one"),e=(c.siblings(".step-two"),this.el.closest(".share-win"));d.addClass("active"),e.fadeOut(300)}.bind(this),3e3)}}),a.registerOnce("ul.step",{init:function(){window.innerWidth>768&&a(window).$on("resize",this.syncLineWidth,this)},syncLineWidth:function(){var a=(this.el.closest(".download-win"),this.el.find(".line-one")),b=this.el.find(".line-two"),c=this.el.find(".bg-one .icon"),d=this.el.find(".bg-two .icon"),e=this.el.find(".bg-three .icon"),f=c[0].getBoundingClientRect().left,g=d[0].getBoundingClientRect().left,h=e[0].getBoundingClientRect().left,i=g-f-80,j=h-g-80;a.width(i),b.width(j)}}),a.registerOnce(".daily form",{init:function(){this.input=this.el.find("input"),this.closeEl=this.el.find(".close"),this.submitWrap=this.el.find(".btn"),this.submitEl=this.el.find("button"),this.stepTwo=this.el.closest(".step-two"),this.stepOne=this.stepTwo.siblings(".step-one"),this.msg=this.el.closest(".daily").find(".msg");var a=this.msg.find(".button-ok");this.closeEl.$on("click",this.onClickClose,this),this.input.$on("input",this.onInputFinshed,this),this.input.$on("blur",this.onBlur,this),this.submitEl.$on("click",this.getLisenceCode,this),a.$on("click",this.onCloseWin,this)},onCloseWin:function(b){var c=a(b.target).closest(".msg");if(c.is(".success"))a(".download-win").com().hide();else{c.hide();var d=this.stepTwo.find("input");d.val(""),d.removeClass("touched"),this.stepTwo.show()}},onBlur:function(b){var c=a(b.currentTarget);if(""==c.val()||c.is("touched")||c.addClass("touched"),""!=this.input.val()&&this.el[0].checkValidity()){var d=this.stepOne.find(".bg-two");d.addClass("active")}},onInputFinshed:function(b){this.inputEl=a(b.currentTarget),this.inputEl.removeClass("touched"),this.debounceInput=this.debounceInput||a.debounce(this.onInput.bind(this),1500),this.debounceInput()},onInput:function(){this.inputEl.is("touched")||""==this.inputEl.val()||this.inputEl.addClass("touched")},onClickClose:function(b){var c=a(b.target).siblings("input");c.val(""),c.focus(),c.removeClass("touched")},getLisenceCode:function(b){if(b.preventDefault(),this.el[0].checkValidity()){var c={action:"get_license_code",e:this.el.find(".email input").val(),u:this.el.find(".name input").val(),l:apower.lang,p:2,r:document.referrer,f:location.href,format:"json"};this.submitEl.addClass("btn-loading"),a.ajax({type:"POST",url:"https://support.apowersoft.com/api/buy/promotion",data:c,dataType:"jsonp",success:function(b){this.submitEl.removeClass("btn-loading");var c=(a(".msg-ok").text(),a(".msg-error").text(),this.stepOne.find(".bg-three")),d=b.status;b.msg;"ok"==d?this.msg.addClass("success"):this.msg.addClass("error"),c.addClass("active"),this.stepTwo.fadeOut(300),this.msg.show()}.bind(this),error:function(){a.msg.error(apower.tr("send_email_failed"))}})}}}),a.registerOnce(".download-win",{ref:{closeEl:".win-close"},init:function(){this.closeEl.$on("click",this.onCloseWin,this)},onCloseWin:function(){}})),a(".video-wrap").length&&a.register("video-player",{selector:".video-wrap",ref:{video:"video",btn:".video-button"},init:function(a){if(this.video.length){var b=!this.video[0].paused;b&&this.el.addClass("video-playing"),this.btn.$on("click",this.onClickBtn,this),this.video.$on("play",function(a){this.el.addClass("video-playing")},this),this.video.$on("pause ended",function(a){this.el.removeClass("video-playing")},this)}},onClickBtn:function(b){b.stopPropagation();var c=a(b.target).closest(".screen"),d=c.find("video");this.video[0].paused?(this.video.trigger("play"),c.length&&d.trigger("play")):(this.video.trigger("pause"),c.length&&d.trigger("pause"))}}),a.registerOnce(".buy",{init:function(){var b=location.search.select(/^\?([\w-]+)$/,1);b&&this.el.each(function(c,d){this.replaceTrackerForEl(a(d),b)}.bind(this))},replaceTrackerForEl:function(a,b){var c=a.attr("href");c&&/\/store\/[\w-]+?\.html/.test(c)&&(c=c.replace(/\?.+|$/,"?"+b),a.attr("href",c))}}),124==apower.productId&&(a.registerOnce(".advance .obj-wrap",{init:function(){this.sliderCom=this.el.find(".slider").com(),this.sliderCom.stopInterval(),this.el.$on("inview",this.onElInview,this),this.el.$on("outview",this.onElOutView,this),this.sliderCom.on("toggle",this.onSliderToggle,this)},onSliderToggle:function(a){var b=this.sliderCom;b.btnWrap.prepend(b.btns.eq(b.index))},onElInview:function(){this.timeoutId=setTimeout(this.sliderCom.resetInterval.bind(this.sliderCom),5e3)},onElOutView:function(){clearTimeout(this.timeoutId),this.timeoutId=0,this.sliderCom.stopInterval()}}),a.registerOnce(".advance .text-content .text",{init:function(){this.el.syncTextHeights(),a(window).$on("resize",this.syncTextHeights,this)},syncTextHeights:function(){this.el.syncTextHeights()}}))}(jQuery);